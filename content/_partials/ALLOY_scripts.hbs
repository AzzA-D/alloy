
<!-- JavaScript -->
<script data-main="app/main" src="{{ assets }}/js/libs/require/require.js"></script>
<!-- GitHub Buttons -->
<script async defer id="github-bjs" src="//buttons.github.io/buttons.js"></script>

<script type="text/JavaScript">
	require(["ink", "equalizer", "sticky"], function() {
		setTimeout(function(){ 
			$(".w--foot .panel").equalizer({
		        minimumWidth: 601,                  // The minimum width at which resizing will still occur
		        applyWhat: "padding-bottom",        // The style to apply the difference in height to
		        applyTo: ".panel__body",       		// The element on which to apply the style to
			});
		}, 2000);
	});
</script>

{{#if js-accordion}}
<script type="text/JavaScript">
	require(["accordion"], function() {
		$(".accordion").accordion({
			onChangeFunc: function($title, $content, toOpen) {
				if (toOpen) {
                	$title.find(".icon").addClass("icon--round53").removeClass("icon--round57");
                } else {
                	$title.find(".icon").addClass("icon--round57").removeClass("icon--round53");
                }
			}
		});
	});
</script>
{{/if}}

{{#if js-tabs}}
<script type="text/JavaScript">
	require(["tabs"], function() { });
</script>
{{/if}}

{{#if js-toast}}
<script type="text/JavaScript">
 	require(["toast"], function() {
 		$("[data-toast]").click(function(e) {
 			e.preventDefault();
 			var json = $(this).data("toast");
 			$.toast(json);
 		}); 		

 		function changeToastLimit() {
 			if ($(window).width() <= 601) {
 				ALLOY.ToastRack.config.limit = 2;
 			} else {
 				ALLOY.ToastRack.config.limit = 5;
 			}
 		}

 		$(window).resize(changeToastLimit);
 		changeToastLimit();
 	});
</script>
{{/if}}

{{#if js-flash}} 
<script type="text/JavaScript">
	require(["flash"], function() {
		$('[data-flash]').click(function(e) {
			e.preventDefault();
			var json = $(this).data("flash");
			$.flash(json);
		});
	});
</script>
{{/if}}

{{#if js-cardflipper}} 
<script type="text/JavaScript">
	require(["cardflipper"], function() { 
		$(".card").cardflipper();
	});
</script>
{{/if}}

{{#if js-gmap}}
<script type="text/JavaScript">
	require(["gmap"], function() {
		$(".gmap").gmap();
	});
</script>
{{/if}}

{{#if js-cardslider}}
<script type="text/JavaScript">
	require(["cardslider", "equalizer"], function() {

		var equalizeSliderCards = function() {
		    $(".cardslider .card").equalizer({
		        minimumWidth: 601,                  // The minimum width at which resizing will still occur
		        applyWhat: "padding-bottom",        // The style to apply the difference in height to
		        applyTo: ".card__body",       		// The element on which to apply the style to
		    });
		};

		equalizeSliderCards();
		$(".cardslider").cardslider({
			onScreenResize: equalizeSliderCards
		});

	});
</script>
{{/if}}

{{#if js-gridify}}
<script type="text/JavaScript">
	require(["gridify", "equalizer"], function() {
		var equalizeMasonryCards = function() {
		    $(".card--gridify").equalizer({
		        minimumWidth: 601,                  // The minimum width at which resizing will still occur
		        applyWhat: "padding-bottom",        // The style to apply the difference in height to
		        applyTo: ".card__body",       		// The element on which to apply the style to
		    });
		};

		equalizeMasonryCards();
		$(".gridify").gridify({
            cardSelector: ".card", // The selector for cards within this.$element
	        activeClass: "active",
	        transitionClass: "deactivating",
	        inactiveClass: "inactive",
	        transitionLength: 400,
	        noItemsEl: '<div class="alert alert--info">There were no results for your current search.  Try adjusting your search options.</div>',
	        searchArgs: { randomise: false },
	        // Example search function to randomly select which elements to display
	        searchFunction: function ($cards, searchArgs) {
	            var matches = [];
	            var nonmatches = [];

	            $cards.each(function() {
	                if (searchArgs.randomise === false || Math.random() > 0.5) { matches.push(this); } 
	                else { nonmatches.push(this); }
	            });

	            var results = { $matches: $(matches), $nonmatches: $(nonmatches) };
	            return results;
	        },
		});

		$(".gridify__control.randomise").click(function(e) {
			e.preventDefault();
	        $(".gridify").gridify({ randomise: true });
		});

		$(".gridify__control.reset").click(function(e) {
			e.preventDefault();
	        $(".gridify").gridify({ randomise: false });
		});

		$(window).resize(function() {
			equalizeMasonryCards();
	        $(".gridify").gridify();
		});
	});
</script>
{{/if}}

{{#dev}}
<script src="http://localhost:35730/livereload.js"></script>
{{/dev}}

<!-- Google Analytics -->
<script>
    var _gaq=[['_setAccount','{{app.analytics}}'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src='//www.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
</script>